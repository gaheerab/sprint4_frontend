---
layout: base 
title: Chat Room
search_exclude: true
permalink: /music/chat_room.html/
---
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct Messages Chat</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #userList {
            list-style-type: none;
            padding: 0;
        }
        #userList li {
            cursor: pointer;
            padding: 8px;
            background-color: #f0f0f0;
            margin: 5px;
 }
        #userList li:hover {
            background-color: #ddd;
        }
        #chatBox {
            display: none;
        }
        #messages {
            height: 200px;
            overflow-y: scroll;
            border: 1px solid #ddd;
            padding: 10px;
        }
    </style>
</head>
<body>
    <h1>Welcome to the Direct Messaging Chatroom</h1>
    <div id="login">
        <label for="username">Enter your username: </label>
        <input type="text" id="username" placeholder="Your username">
        <button onclick="login()">Log In</button>
    </div>

    <div id="userListContainer" style="display: none;">
        <h2>Choose a user to chat with:</h2>
        <ul id="userList"></ul>
    </div>

    <div id="chatBox">
        <h2>Chat with <span id="chatWith"></span></h2>
        <div id="messages"></div>
        <input type="text" id="messageInput" placeholder="Type a message...">
        <button id="sendMessage">Send</button>
    </div>

    <script>
        let currentUser = '';
        let selectedUser = '';
        let socket = null;

        // Simulate user data from a backend
        const users = [
            { id: 1, username: 'Alice' },
            { id: 2, username: 'Bob' },
            { id: 3, username: 'Charlie' },
        ];

        // Simulate database with messages between users
        const messages = {};

        // List of bad words to censor
        const badWords = ['fuck', 'shit', 'bitch', 'asshole', 'ass'];

        function login() {
            currentUser = document.getElementById("username").value;
            if (currentUser) {
                document.getElementById("login").style.display = "none";
                document.getElementById("userListContainer").style.display = "block";
                displayUsers();
            }
        }

        function displayUsers() {
            const userList = document.getElementById("userList");
            userList.innerHTML = '';
            users.forEach(user => {
                if (user.username !== currentUser) {
                    const li = document.createElement("li");
                    li.textContent = user.username;
                    li.onclick = () => startChat(user);
                    userList.appendChild(li);
                }
            });
        }

        function startChat(user) {
            selectedUser = user.username;
            document.getElementById("chatWith").textContent = selectedUser;
            document.getElementById("userListContainer").style.display = "none";
            document.getElementById("chatBox").style.display = "block";
            displayMessages(user);
        }

        function displayMessages(user) {
            const messagesDiv = document.getElementById("messages");
            messagesDiv.innerHTML = '';
            const chatKey = [currentUser, user.username].sort().join('-');
            if (messages[chatKey]) {
                messages[chatKey].forEach(msg => {
                    const p = document.createElement("p");
                    p.textContent = msg;
                    messagesDiv.appendChild(p);
                });
            }
        }

        function censorMessage(message) {
            // Loop through the bad words and replace them with asterisks
            badWords.forEach(badWord => {
                const regex = new RegExp(badWord, 'gi');
                message = message.replace(regex, '****'); // Replace bad words with asterisks
            });
            return message;
        }

        document.getElementById("sendMessage").onclick = function () {
            let message = document.getElementById("messageInput").value;
            if (message) {
                // Censor the message before adding it
                message = censorMessage(message);

                const chatKey = [currentUser, selectedUser].sort().join('-');
                if (!messages[chatKey]) {
                    messages[chatKey] = [];
                }
                messages[chatKey].push(`${currentUser}: ${message}`);
                displayMessages({ username: selectedUser });
                document.getElementById("messageInput").value = '';
            }
        };
    </script>
</body>
</html>
