---
layout: base 
title: artist-reccomendation 
search_exclude: true
permalink: /melodymates/artist-recommendation.html/
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArtInfo CRUD</title>
  <style>
    body {
      background-color: #e6f7ff; /* Light blue background */
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    table, th, td {
      border: 2px solid #1a3d5b; /* Dark blue border */
      border-collapse: collapse;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #b3c6ff; /* Light blue header */
      color: #003366; /* Dark blue text for headers */
    }
    td {
      background-color: #f2f2f2; /* Light grey background for table cells */
    }
    button {
      background-color: #1a3d5b; /* Dark blue button */
      color: white;
      border: 2px solid #1a3d5b; /* Dark blue border around button */
      padding: 8px 16px;
      cursor: pointer;
      border-radius: 5px;
    }
    button:hover {
      background-color: #003366; /* Darker blue on hover */
      border-color: #003366; /* Darker blue border on hover */
    }
    h1, h2 {
      color: #003366; /* Dark blue text for headings */
      margin-left: 10px;
    }
    input[type="text"] {
      padding: 5px;
      border: 2px solid #1a3d5b; /* Dark blue border for input fields */
      border-radius: 3px;
    }
    label {
      color: #003366; /* Dark blue text for labels */
    }
    form {
      margin: 20px;
    }
    table {
      width: 90%;
      margin: 20px auto;
    }
  </style>
</head>
<body>
  <h1>Artist Recommendation</h1>
  <h2>User Input</h2>

  <!-- Form for adding/updating users -->
  <form id="userForm">
    <label for="name">Name:</label>
    <input type="text" id="name" required><br><br>

    <label for="uid">Username(Unchangeable):</label>
    <input type="text" id="uid" required><br><br>

    <label for="favorites">Favorite Artist(s) (comma-separated):</label>
    <input type="text" id="favorites" required><br><br>

    <button type="submit">Submit</button>
  </form>

  <h2>User Information</h2>
  <table id="userTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Username</th>
        <th>Favorite Artists</th>
        <th>Actions</th>
        <th>Recommended Artists</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    let pythonURI = ""
    if (location.hostname === "localhost") {
        pythonURI = "http://localhost:8887";
    } else if (location.hostname === "127.0.0.1") {
            pythonURI = "http://127.0.0.1:8887";
    } else {
            pythonURI =  "https://melodymates.stu.nighthawkcodingsociety.com";
    }
    console.log(pythonURI)
    // API URL
    const apiUrl = pythonURI + "/api/artinfo"; // Update with your actual API URL
    let editingUserId = null;

      // Handle form submission for adding/updating users
  document.getElementById('userForm').addEventListener('submit', function(event) {
    event.preventDefault();
    const name = document.getElementById('name').value;
    const uid = document.getElementById('uid').value;
    const favorites = document.getElementById('favorites').value.split(',').map(item => item.trim());

    const data = { name, favorites };

    if (editingUserId) {
      updateUser(uid, data);
    } else {
      createUser({ name, uid, favorites });
    }
  });

  // Create new user (POST request)
  function createUser(data) {
    fetch('http://localhost:8887/api/artinfo', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data),
    }).then(response => response.json())
      .then(() => {
        loadUsers();
        resetForm();
      });
  }

  // Update user (PUT request)
  function updateUser(uid, data) {
    fetch(`http://localhost:8887/api/artinfo`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ uid, name: data.name || "", favorites: data.favorites }),
    }).then(response => response.json())
      .then(() => {
        loadUsers();
        resetForm();
        editingUserId = null;

        // Re-enable the UID field after successful update
        document.getElementById('uid').disabled = false;
      });
  }

  // Reset form fields
  function resetForm() {
    document.getElementById('name').value = '';
    document.getElementById('uid').value = '';
    document.getElementById('favorites').value = '';
  }

  // Fetch all users and populate the table
  function loadUsers() {
    fetch('http://localhost:8887/api/artinfo')
      .then(response => response.json())
      .then(data => {
        const tableBody = document.getElementById('userTable').getElementsByTagName('tbody')[0];
        tableBody.innerHTML = '';
        data.forEach(user => {
          const row = tableBody.insertRow();
          row.innerHTML = `
            <td>${user.name}</td>
            <td>${user.uid}</td>
            <td>${user.favorites.join(', ')}</td>
            <td>
              <button onclick="editUser('${user.uid}')">Update</button>
              <button onclick="deleteUser('${user.uid}')">Delete</button>
            </td>
          `;
        });
      });
  }

  // Edit user
  function editUser(uid) {
    fetch(`http://localhost:8887/api/artinfo?uid=${uid}`)
      .then(response => response.json())
      .then(user => {
        document.getElementById('name').value = '';
        document.getElementById('uid').value = user.uid || uid;
        document.getElementById('favorites').value = user.favorites.join(', ');
        editingUserId = uid;

        // Disable the UID field when editing (immediately)
        document.getElementById('uid').disabled = true;
      });
  }

  // Delete user
  function deleteUser(uid) {
    fetch(`http://localhost:8887/api/artinfo`, {
      method: 'DELETE',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ uid })
    }).then(() => loadUsers());
  }

  // Initial load of users
  loadUsers();

  </script>
</body>
</html>
